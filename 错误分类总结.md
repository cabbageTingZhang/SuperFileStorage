#温故而知新, 可以为师矣

## <a name="目录"></a>目录
###<a name="开发中遇到的问题"></a>开发中遇到的问题
1. [屏蔽黑夜模式](#屏蔽黑夜模式])
2. [iOS UrlEnCode加密需要注意](#iOS UrlEnCode加密需要注意)

###<a name="发布被拒问题"></a>发布被拒问题
1. [WARNING ITMS-90737](#WARNING ITMS-90737)
2. [上传构建版本自动消失](#上传构建版本自动消失)

#### <a name="屏蔽黑夜模式"></a>屏蔽黑夜模式  [↩](#开发中遇到的问题)
在info.plist文件里添加一下键值对就可以屏蔽黑夜模式, 但是需要注意的是在用低版本Xcode编译的时候, 不需要以下键值, 否则应该在上传App Store构建版本时会出问题
```
<key>UIUserInterfaceStyle</key>
<string>Light</string>
```
#### <a name="iOS UrlEnCode加密需要注意"></a>iOS UrlEnCode加密需要注意 [↩](#开发中遇到的问题)



#### <a name="WARNING ITMS-90737"></a>WARNING ITMS-90737 [↩](#发布被拒问题)
[参考文章](https://www.jianshu.com/p/18f089c4454c)

```
WARN: WARNING ITMS-90737: "Invalid Document Configuration.
Document Based Apps should support either the Document Browser (UISupportsDocumentBrowser = YES) or implement Open In Place (LSSupportsOpeningDocumentsInPlace = YES/NO). 
Visit https://developer.apple.com/document-based-apps/ for more information."
```
如果你的app中有用到UIDocumentInteractionController来打开文件，需要在info.plist中设置UISupportsDocumentBrowser为YES 

#### <a name=@"上传构建版本自动消失"></a>上传构建版本自动消失 [↩](#发布被拒问题)
[参考文章](https://www.jianshu.com/p/2e8383bf95c3)

1. iPA 包上传至App Store后,一个小时不显示构建版本, 我傻傻的等了好长时间, 
2. 但是现在你只要上传成功, 会在你的活动栏目下看到如下图:
![image.png](https://upload-images.jianshu.io/upload_images/1367029-6f3868577d9edb86.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

结果：上述两种情况出现的时候，说明你的iPa包是有问题的，需要正确处理后，才能进行正常审核流程。

* 【切记】不要无脑等待了，也不要反复重新打包上传了，理智一点，这些都是无用功。
* 【正确做法】第一时间查看苹果开发者账号邮箱，任何异常情况都会有邮件通知的，只要你能看懂苹果发的邮件，基本也就知道了处理方法。

构建版本不出现大多数都是由于info.plist文件中没有添加相应的访问权限或者对权限key值没有添加对应的value提示语。
本人此次的问题是项目中缺少访问权限导致的, 下面附上各种需求对应的访问权限 (但是以前缺少一直没有出问题, 有可能是苹果加强了用户隐私安全)

```
	<key>NSCalendarsUsageDescription</key>
	<string>需要您的同意才能访问日历</string>
	<key>NSCameraUsageDescription</key>
	<string>需要您的同意打开摄像头,获得更多体验</string>
	<key>NSContactsUsageDescription</key>
	<string>需要您的同意才能访问通讯录</string>
	<key>NSLocationAlwaysUsageDescription </key>
	<string>需要您的同意才能打开位置才能始终访问位置</string>
	<key>NSLocationUsageDescription</key>
	<string>需要您的同意才能打开位置</string>
	<key>NSLocationWhenInUseUsageDescription</key>
	<string>需要您的同意,才能在使用期间访问位置</string>
	<key>NSMicrophoneUsageDescription</key>
	<string>需要您的同意才能打开麦克风</string>
	<key>NSPhotoLibraryAddUsageDescription</key>
	<string>需要您的同意才能获取相册图片,用来聊天发送图片,是否允许打开相册?</string>
	<key>NSPhotoLibraryUsageDescription</key>
	<string>需要您的同意才能获取相册图片,用来聊天发送图片</string>
	<key>NSCalendarsUsageDescription</key>
	<string>App需要您的同意,才能访问日历</string>
	<key>NSRemindersUsageDescription</key>
	<string>App需要您的同意,才能访问提醒事项</string>
	<key>NSMotionUsageDescription</key>
	<string>App需要您的同意,才能访问运动与健身</string>
	<key>NSHealthUpdateUsageDescription</key>
	<string>App需要您的同意,才能访问健康更新 </string>
	<key>NSHealthShareUsageDescription</key>
	<string>App需要您的同意,才能访问健康分享</string>
	<key>NSBluetoothPeripheralUsageDescription</key>
	<string>App需要您的同意,才能访问蓝牙</string>
	<key>NSAppleMusicUsageDescription</key>
	<string>App需要您的同意,才能访问媒体资料库</string>
```
